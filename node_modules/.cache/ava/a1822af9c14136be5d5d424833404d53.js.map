{"version":3,"sources":["index.js"],"names":["fs","require","config","test","nock","socketIO","db","initApp","html","readFileSync","server","createServer","io","on","client","emit","listen","scope","mmqHomeUrl","get","reply","t","connect","true","isDone"],"mappings":";;;;;AAAA,MAAMA,KAAKC,QAAQ,IAAR,CAAX;;AAEA,MAAMC,SAASD,QAAQ,QAAR,CAAf;AAAA,MACM,EAACE,IAAD,KAASF,QAAQ,KAAR,CADf;AAAA,MAEMG,OAAOH,QAAQ,MAAR,CAFb;AAAA,MAGMI,WAAWJ,QAAQ,WAAR,CAHjB;;AAKA,MAAMK,KAAKL,QAAQ,UAAR,CAAX;AACA,MAAMM,UAAUN,QAAQ,WAAR,CAAhB;;AAEA,MAAMO,OAAOR,GAAGS,YAAH,CAAgB,aAAhB,EAA+B,OAA/B,CAAb;;AAEA,MAAMC,SAAST,QAAQ,MAAR,EAAgBU,YAAhB,EAAf;;AAEA,MAAMC,KAAKP,SAASK,MAAT,CAAX;AACAE,GAAGC,EAAH,CAAM,YAAN,EAAqBC,MAAD,IAAY;AAC9BA,SAAOC,IAAP,CAAY,sBAAZ,EAAoC,EAApC;AAGD,CAJD;AAKAL,OAAOM,MAAP,CAAc,IAAd;;AAEA,MAAMC,QAAQb,KAAKF,OAAOgB,UAAZ,EACXC,GADW,CACP,GADO,EAEXC,KAFW,CAEL,GAFK,EAEAZ,IAFA,CAAd;;AAIAL,KAAK,iCAAL,EAAwC,MAAOkB,CAAP,IAAa;AAAA;;AACnD,QAAMf,GAAGgB,OAAH,EAAN;;AAEA,QAAMf,SAAN;;AAEAc,IAAEE,IAAF,uBAAO,+CAAMC,MAAN,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACD,CAND","file":"index.js","sourcesContent":["const fs = require('fs');\n\nconst config = require('config'),\n      {test} = require('ava'),\n      nock = require('nock'),\n      socketIO = require('socket.io');\n\nconst db = require('../db.js');\nconst initApp = require('../app.js');\n\nconst html = fs.readFileSync('./test.html', 'utf-8');\n\nconst server = require('http').createServer();\n\nconst io = socketIO(server);\nio.on('connection', (client) => {\n  client.emit('game-server-song-end', {\n\n  });\n});\nserver.listen(3000);\n\nconst scope = nock(config.mmqHomeUrl)\n  .get('/')\n  .reply(200, html);\n\ntest('should save new track and round', async (t) => {\n  await db.connect();\n\n  await initApp();\n\n  t.true(scope.isDone());\n});\n"]}